SELECT
	 COL.COLUMN_NAME AS COLUMNNAME
	,CASE WHEN LCASE(COL.EXTRA) = LCASE('auto_increment') THEN 1 ELSE  0 END AS IS_IDENTITY
	,CASE WHEN UCASE(COL.COLUMN_KEY) = 'PRI' THEN 1 ELSE 0 END AS IS_PRIMARYKEY
	,CASE WHEN EXISTS 	(
							SELECT 1 
							FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE  B
							WHERE COL.TABLE_SCHEMA = B.TABLE_SCHEMA
							    AND COL.TABLE_NAME = B.TABLE_NAME
							    AND COL.COLUMN_NAME = B.REFERENCED_COLUMN_NAME
						)
			THEN 1
			ELSE 0
	END AS IS_FOREIGNKEY
	,(
		SELECT REFERENCED_TABLE_NAME
		FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE  B
		WHERE COL.TABLE_SCHEMA = B.TABLE_SCHEMA
			AND COL.TABLE_NAME = B.TABLE_NAME
			AND COL.COLUMN_NAME = B.REFERENCED_COLUMN_NAME
	) As TABLE_FOREIGNKEY
	, CASE 
		WHEN LCASE(COL.DATA_TYPE) = 'smallint' THEN 'Int16'
		WHEN LCASE(COL.DATA_TYPE) = 'tinyint' THEN 'Int16'
		WHEN LCASE(COL.DATA_TYPE) = 'int' THEN 'Int32'
		WHEN LCASE(COL.DATA_TYPE) = 'integer' THEN 'Int32'
		WHEN LCASE(COL.DATA_TYPE) = 'mediumint' THEN 'Int32'
		WHEN LCASE(COL.DATA_TYPE) = 'bigint' THEN 'Int64'
		WHEN LCASE(COL.DATA_TYPE) = 'decimal' THEN 'Double'
		WHEN LCASE(COL.DATA_TYPE) = 'numeric' THEN 'Double'
		WHEN LCASE(COL.DATA_TYPE) = 'float' THEN 'Double'
		WHEN LCASE(COL.DATA_TYPE) = 'double' THEN 'Double'
		WHEN LCASE(COL.DATA_TYPE) = 'bit' THEN 'Boolean'
		WHEN LCASE(COL.DATA_TYPE) = 'date' THEN 'DateTime'
		WHEN LCASE(COL.DATA_TYPE) = 'time' THEN 'DateTime2'
		WHEN LCASE(COL.DATA_TYPE) = 'timestamp' THEN 'DateTime3'
		WHEN LCASE(COL.DATA_TYPE) = 'datetime' THEN 'DateTime4'
		WHEN LCASE(COL.DATA_TYPE) = 'year' THEN 'Int16'		
		WHEN LCASE(COL.DATA_TYPE) = 'binary' THEN 'Int16'
		WHEN LCASE(COL.DATA_TYPE) = 'varbinary' THEN 'Int32'
		WHEN LCASE(COL.DATA_TYPE) = 'char' THEN 'String'
		WHEN LCASE(COL.DATA_TYPE) = 'nvarchar' THEN 'String'
		WHEN LCASE(COL.DATA_TYPE) = 'nchar' THEN 'String'
		WHEN LCASE(COL.DATA_TYPE) = 'ntext' THEN 'String'
		WHEN LCASE(COL.DATA_TYPE) = 'text' THEN 'String'
		WHEN LCASE(COL.DATA_TYPE) = 'varchar' THEN 'String'
		ELSE 'Int32'
	 END AS DATA_TYPE
	,CASE WHEN COL.CHARACTER_MAXIMUM_LENGTH IS NULL THEN 0 ELSE  COL.CHARACTER_MAXIMUM_LENGTH END AS DATA_SIZE
FROM INFORMATION_SCHEMA.COLUMNS COL
WHERE COL.TABLE_SCHEMA = '#DatabaseName#'
    AND  COL.TABLE_NAME = '#TableName#'
