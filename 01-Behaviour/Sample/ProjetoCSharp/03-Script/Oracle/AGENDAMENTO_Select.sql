/**********************************************************
  AUTHOR	: 
  VERSION	: 1.0.0.0
  DATE		: 08/04/2014 09:03:44
  FUNCTION	: Select records from table GP_AGENDAMENTO filtered by 
		  parameters passed into the procedure
**********************************************************/
/*Create the SQL for the stored procedure*/
CREATE OR REPLACE PROCEDURE AGENDAMENTO_Select
(
    var_IDAGENDAMENTO IN INTEGER  DEFAULT NULL,
    var_IDROTINA IN INTEGER  DEFAULT NULL,
    var_DATAINICIO IN DATE  DEFAULT NULL,
    var_HORAINICIO IN VARCHAR2  DEFAULT NULL,
    var_DATAFIM IN DATE  DEFAULT NULL,
    var_HORAFIM IN VARCHAR2  DEFAULT NULL,
    var_INTERVALO IN INTEGER  DEFAULT NULL,
    var_REPETICAO IN INTEGER  DEFAULT NULL
    ,returnset    OUT SYS_REFCURSOR
) 
IS
BEGIN
	OPEN returnset FOR
		SELECT
			IDAGENDAMENTO,
			IDROTINA,
			DATAINICIO,
			HORAINICIO,
			DATAFIM,
			HORAFIM,
			INTERVALO,
			REPETICAO
		FROM
			GP_AGENDAMENTO
		WHERE
			(IDAGENDAMENTO = var_IDAGENDAMENTO or var_IDAGENDAMENTO is null)
		AND (IDROTINA = var_IDROTINA OR var_IDROTINA IS NULL)
		AND (DATAINICIO = var_DATAINICIO OR var_DATAINICIO IS NULL)
		AND (HORAINICIO = var_HORAINICIO OR var_HORAINICIO IS NULL)
		AND (DATAFIM = var_DATAFIM OR var_DATAFIM IS NULL)
		AND (HORAFIM = var_HORAFIM OR var_HORAFIM IS NULL)
		AND (INTERVALO = var_INTERVALO OR var_INTERVALO IS NULL)
		AND (REPETICAO = var_REPETICAO OR var_REPETICAO IS NULL)
		;
END AGENDAMENTO_Select;
GO

